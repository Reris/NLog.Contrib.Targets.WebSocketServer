<?xml version="1.0" encoding="utf-8"?>

<nlog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
      throwExceptions="true">
    <extensions>
        <add assembly="NLog.Contrib.Targets.WebSocketServer.Core"/>
        <add assembly="NLog.Web.AspNetCore"/>
    </extensions>
    <targets async="true">
        <target xsi:type="Console" layout="${longdate}|${level:uppercase=true}|${logger}|${message}" name="consolelog"/>
        <target xsi:type="NLog.Contrib.Targets.WebSocketServer.Core"
                name="websocket"
                throwExceptionIfSetupFails="true"
                layout="${longdate}|${level:uppercase=true}|${event-properties:machinename:whenEmpty=${machinename}}|${event-properties:processname:whenEmpty=${processname}}|${logger}|${message}"/>
    </targets>
    <rules>
        <logger name="*" minlevel="Trace" writeTo="websocket, consolelog"/>
    </rules>
</nlog>
